2025-10-29 16:40:39,416 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=ww779187ee7c9f7085&corpsecret=AAR4FC_5E6m4mbvKWepNrLt7qPFdIHXrjrK77sQcNqE
2025-10-29 16:40:40,869 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"ok","access_token":"QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw","expires_in":7200}
2025-10-29 16:40:40,877 - [INFO] - db.py:17 - ✅ DB connected
2025-10-29 16:40:40,877 - [INFO] - db.py:37 - 执行SQL: INSERT INTO departments (id, name, parentid) VALUES (%s, %s, %s) | params: (2001, '模拟部门', 1)
2025-10-29 16:40:40,888 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw
2025-10-29 16:40:41,418 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"created","id":2001}
2025-10-29 16:40:41,418 - [INFO] - assertions.py:29 - ✅ JSONPath 断言成功：$.errcode = 0
2025-10-29 16:40:41,422 - [INFO] - schema.py:24 - ✅ JSON Schema 校验通过
2025-10-29 16:40:41,422 - [INFO] - db.py:21 - 执行查询: SELECT name FROM departments WHERE id = 2001 | params: None
2025-10-29 16:40:41,469 - [INFO] - db.py:37 - 执行SQL: DELETE FROM departments WHERE id = %s | params: (2001,)
2025-10-29 16:40:41,482 - [INFO] - db.py:50 - DB closed
2025-10-29 16:41:57,344 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=ww779187ee7c9f7085&corpsecret=AAR4FC_5E6m4mbvKWepNrLt7qPFdIHXrjrK77sQcNqE
2025-10-29 16:41:57,819 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"ok","access_token":"QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw","expires_in":7200}
2025-10-29 16:41:57,827 - [INFO] - db.py:17 - ✅ DB connected
2025-10-29 16:41:57,827 - [INFO] - db.py:37 - 执行SQL: INSERT INTO departments (id, name, parentid) VALUES (%s, %s, %s) | params: (2001, '接口测试部A', 1)
2025-10-29 16:41:57,838 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw
2025-10-29 16:41:58,673 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"created","id":2001}
2025-10-29 16:41:58,674 - [INFO] - assertions.py:29 - ✅ JSONPath 断言成功：$.errcode = 0
2025-10-29 16:41:58,676 - [INFO] - schema.py:24 - ✅ JSON Schema 校验通过
2025-10-29 16:41:58,676 - [INFO] - db.py:21 - 执行查询: SELECT name FROM departments WHERE id = 2001 | params: None
2025-10-29 16:41:58,677 - [INFO] - assertions.py:63 - ✅ 数据库断言通过: name = 接口测试部A
2025-10-29 16:41:58,679 - [INFO] - db.py:37 - 执行SQL: DELETE FROM departments WHERE id = %s | params: (2001,)
2025-10-29 16:41:58,696 - [INFO] - db.py:50 - DB closed
2025-10-29 16:48:41,611 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=ww779187ee7c9f7085&corpsecret=AAR4FC_5E6m4mbvKWepNrLt7qPFdIHXrjrK77sQcNqE
2025-10-29 16:48:42,134 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"ok","access_token":"QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw","expires_in":7200}
2025-10-29 16:48:42,136 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw
2025-10-29 16:48:43,819 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"created","id":2}
2025-10-29 16:48:43,821 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/simplelist?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw
2025-10-29 16:48:45,129 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"ok","department_id":[{"id":1,"parentid":0,"order":100000000},{"id":2,"parentid":1,"order":100000000}]}
2025-10-29 16:48:45,130 - [INFO] - assertions.py:29 - ✅ JSONPath 断言成功：$.errcode = 0
2025-10-29 16:48:45,132 - [INFO] - schema.py:24 - ✅ JSON Schema 校验通过
2025-10-29 16:48:45,142 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw&id=2
2025-10-29 16:48:47,653 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"deleted"}
2025-10-29 16:50:23,542 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=ww779187ee7c9f7085&corpsecret=AAR4FC_5E6m4mbvKWepNrLt7qPFdIHXrjrK77sQcNqE
2025-10-29 16:50:24,568 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"ok","access_token":"QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw","expires_in":7200}
2025-10-29 16:50:24,574 - [INFO] - db.py:17 - ✅ DB connected
2025-10-29 16:50:24,574 - [INFO] - db.py:37 - 执行SQL: INSERT INTO departments (id, name, parentid) VALUES (%s, %s, %s) | params: (2001, '接口测试部A', 1)
2025-10-29 16:50:24,593 - [INFO] - base_api.py:16 - 请求接口为：https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=QK7qLEWrG9AoJRdbh75pFYJQsMLhm2tgaoyHevuSGN98KG__gbd7R-cblrn2f8aVJ2kuAas23mo4QH24uYlAv2Vnrcwi7D5wYZxhB10zNKI89DzBWWKYf7_zu94fGiz3dn0aXqz2Z7937jTmE1iBjEtRNDgp1qeOKPEdiQiWZXevJvUcSbRqFOe6motDvgZYTCk2vNvIEL60Ta-T3f3HNw
2025-10-29 16:50:26,455 - [INFO] - base_api.py:18 - 接口响应为：{"errcode":0,"errmsg":"created","id":2001}
2025-10-29 16:50:26,456 - [INFO] - assertions.py:29 - ✅ JSONPath 断言成功：$.errcode = 0
2025-10-29 16:50:26,457 - [INFO] - schema.py:24 - ✅ JSON Schema 校验通过
2025-10-29 16:50:26,458 - [INFO] - db.py:21 - 执行查询: SELECT name FROM departments WHERE id = 2001 | params: None
2025-10-29 16:50:26,458 - [INFO] - assertions.py:63 - ✅ 数据库断言通过: name = 接口测试部A
2025-10-29 16:50:26,461 - [INFO] - db.py:50 - DB closed
