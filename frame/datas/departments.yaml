# ================= 创建部门 =================
# YAML 只保留测试输入和断言数据，不负责数据准备或清理
# 需要唯一化的字段统一使用 "${auto}" 占位符，由 fixture 动态生成
create_department:
  # ---- 成功场景 ----
  - name: 正常创建一级部门
    group: success
    data:
      name: "${auto}"
      parentid: "${auto}"
    expect:
      errcode: 0
  - name: 创建含英文名部门
    group: success
    data:
      name: "${auto}"
      name_en: "DevDept"
      parentid: "${auto}"
    expect:
      errcode: 0
  - name: 创建排序值部门
    group: success
    data:
      name: "${auto}"
      parentid: "${auto}"
      order: 20
    expect:
      errcode: 0
  - name: 创建含特殊字符部门
    group: success
    data:
      name: "${auto}"
      parentid: "${auto}"
    expect:
      errcode: 0
  - name: 创建emoji部门
    group: success
    data:
      name: "${auto}"
      parentid: "${auto}"
    expect:
      errcode: 0
  - name: 创建中英文混合部门
    group: success
    data:
      name: "${auto}"
      parentid: "${auto}"
    expect:
      errcode: 0

  # ---- 验证场景 ----
  - name: 创建部门名称为空
    group: validation
    data:
      name: ""
      parentid: "${auto}"
    expect:
      errcode: 40058
  - name: parentid传字符串类型
    group: validation
    data:
      name: "${auto}"
      parentid: "invalid_string"
    expect:
      errcode: 40058
  - name: parentid传空字符串
    group: validation
    data:
      name: "${auto}"
      parentid: ""
    expect:
      errcode: 40058
  - name: order传字符串类型
    group: validation
    data:
      name: "${auto}"
      parentid: "${auto}"
      order: "invalid_order"
    expect:
      errcode: 40058
  - name: 指定已存在的id创建部门
    group: validation
    data:
      name: "${auto}"
      parentid: "${auto}"
      id: 1
    expect:
      errcode: 60123

  # ---- 边界场景 ----
  - name: 创建部门名称边界值64字符
    group: boundary
    data:
      name: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
      parentid: "${auto}"
    expect:
      errcode: 0
  - name: 创建部门名称边界值65字符
    group: boundary
    data:
      name: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
      parentid: "${auto}"
    expect:
      errcode: 40058
  - name: 创建部门id为负数
    group: boundary
    data:
      name: "${auto}"
      parentid: "${auto}"
      id: -5
    expect:
      errcode: 40058
  - name: 创建部门父级不存在
    group: boundary
    data:
      name: "${auto}"
      parentid: 99999
    expect:
      errcode: 60004
  - name: 创建部门order为0
    group: boundary
    data:
      name: "${auto}"
      parentid: "${auto}"
      order: 0
    expect:
      errcode: 0
  - name: 创建部门order为负数
    group: boundary
    data:
      name: "${auto}"
      parentid: "${auto}"
      order: -1
    expect:
      errcode: 0

# ================= 查询部门 =================
get_department:
  # ---- 成功场景 ----
  - name: 查询已存在部门
    group: success
    data:
      id: "${auto}"
    expect:
      errcode: 0

  # ---- 边界场景 ----
  - name: 查询不存在部门
    group: boundary
    data:
      id: 99999
    expect:
      errcode: 60123

# ================= 修改部门 =================
update_department:
  # ---- 成功场景 ----
  - name: 修改部门名称
    group: success
    data:
      id: "${auto}"
      name: "${auto}"
    expect:
      errcode: 0
  - name: 修改部门排序值
    group: success
    data:
      id: "${auto}"
      order: 100
    expect:
      errcode: 0
  - name: 修改部门英文名
    group: success
    data:
      id: "${auto}"
      name_en: "UpdatedDept"
    expect:
      errcode: 0

  # ---- 验证场景 ----
  - name: 修改部门名称为空
    group: validation
    data:
      id: "${auto}"
      name: ""
    expect:
      errcode: 40058
  - name: 修改部门名称超长
    group: validation
    data:
      id: "${auto}"
      name: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    expect:
      errcode: 40058
  - name: 修改parentid为字符串
    group: validation
    data:
      id: "${auto}"
      parentid: "invalid"
    expect:
      errcode: 40058

  # ---- 边界场景 ----
  - name: 修改父部门为不存在部门
    group: boundary
    data:
      id: "${auto}"
      parentid: 99999
    expect:
      errcode: 60124
  - name: 修改部门名称为边界值64字符
    group: boundary
    data:
      id: "${auto}"
      name: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    expect:
      errcode: 0

# ================= 删除部门 =================
delete_department:
  # ---- 成功场景 ----
  - name: 删除无子部门部门
    group: success
    data:
      id: "${auto}"
      name: "${auto}"
    expect:
      errcode: 0

  # ---- 边界场景 ----

  - name: 删除不存在部门
    group: boundary
    data:
      id: 99999
    expect:
      errcode: 60123
